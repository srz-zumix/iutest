# optional cmake test steps template

parameters:
  CMAKE_GENERATOR_NAME: 'Visual Studio 2019'
  PLATFORM: 'x64'
  CMAKE_OPTIONS: ''
  TEST_CONFIGURATION: 'Debug'

steps:
- script: |
    mkdir build && cd build
    cmake ../projects/cmake -G "${{ parameters.CMAKE_GENERATOR_NAME}}" -A ${{ parameters.PLATFORM }} ${{ parameters.CMAKE_OPTIONS }}
  displayName: 'generate'

- script: |
    cd build && cmake --build .
  displayName: 'build'

- script: |
    cd build && ctest -C ${TEST_CONFIGURATION} -V
  displayName: 'test'
